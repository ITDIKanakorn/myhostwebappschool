 <script>
    // Fetch the course data and populate the table
    function formatTime(time) {
    // แปลงเวลาเป็นรูปแบบ HH:mm
    return time ? time.slice(0, 5) : ''; // ถ้า time มีค่าให้ตัดเอาเฉพาะ HH:mm
}

function fetchCourses() {
    fetch('../fetch/fetch_courses.php')
        .then(response => response.json())
        .then(data => {
            const tableBody = document.querySelector('#resultTable tbody');
            tableBody.innerHTML = ''; // Clear any existing data

            if (data.length > 0) {
                data.forEach(course => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class='text-center'>${course['รหัสวิชา']}</td>
                        <td>${course['ชื่อวิชา']}</td>
                        <td class='text-center'>${course['หน่วยกิต']}</td>
                        <td class='text-center'>${course['Sec.']}</td>
                        <td class='text-center'>${course['ห้องเรียน']}</td>
                        <td>${course['วันที่เรียน']} ${formatTime(course['เวลาเริ่ม'])} - ${formatTime(course['เวลาเลิก'])}</td>
                        <td>${course['ชื่อผู้สอน']}</td>
                    `;
                    tableBody.appendChild(row);
                });
            } else {
                tableBody.innerHTML = '<tr><td colspan="7" class="text-center">No courses found.</td></tr>';
            }
        })
        .catch(error => {
            console.error('Error fetching course data:', error);
            Swal.fire('Error', 'Failed to fetch course data. Please try again later.', 'error');
        });
}

// Call the function when the page loads
window.onload = fetchCourses;



    document.getElementById('goToPayment').addEventListener('click', function (event) {
            event.preventDefault(); // Prevent the default link behavior


            Swal.fire({
                title: 'กำลังโหลด',
                text: 'กำลังไปยังหน้าชำระค่าเล่าเรียน...',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading(); // Show the loading spinner
                }
            });


            // Redirect after a short delay to allow the loading message to appear
            setTimeout(() => {
                window.location.href = '../payment/cash.php';
            }, 1000); // Adjust the delay as needed
        });


    </script>
